# 环境变量安全配置指南

## 🔐 重要安全提醒
**绝对不要将真实的密钥推送到 GitHub 或任何公开代码库！**

## 📋 本地开发环境设置

### 1. 复制模板文件
```bash
cp env.example .env.local
```

### 2. 获取 Supabase 密钥
1. 访问 [Supabase Dashboard](https://supabase.com/dashboard)
2. 登录您的账户
3. 选择您的项目
4. 进入 `Settings` > `API`
5. 复制以下信息：
   - `Project URL` → `NEXT_PUBLIC_SUPABASE_URL`
   - `anon public` key → `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - `service_role` key → `SUPABASE_SERVICE_ROLE_KEY`

### 3. 编辑 .env.local 文件
```bash
# 将模板中的占位符替换为真实值
NEXT_PUBLIC_SUPABASE_URL=https://ltqzxwyowsgdelirjuzq.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

## 🚀 部署配置

### Vercel 部署
1. 在 Vercel Dashboard 中：
   - 进入项目设置
   - 选择 "Environment Variables"
   - 添加所有必要的环境变量

### Netlify 部署
1. 在 Netlify Dashboard 中：
   - 进入 Site settings
   - 选择 "Environment variables"
   - 添加环境变量

### 其他平台
大多数托管平台都有环境变量配置界面，请查看相应文档。

## 🔄 团队协作

### 新成员加入项目
1. 克隆代码库：
   ```bash
   git clone https://github.com/your-username/your-repo.git
   cd your-repo
   ```

2. 安装依赖：
   ```bash
   npm install
   ```

3. 配置环境变量：
   ```bash
   cp env.example .env.local
   # 然后编辑 .env.local 填入真实值
   ```

4. 启动开发服务器：
   ```bash
   npm run dev
   ```

### 共享 Supabase 项目
- 项目管理员可以在 Supabase Dashboard 中邀请团队成员
- 成员需要有项目访问权限才能获取密钥
- 或者管理员可以安全地分享密钥（通过加密聊天工具等）

## ✅ 安全检查清单

- [ ] `.env.local` 文件已添加到 `.gitignore`
- [ ] 真实密钥未出现在任何提交中
- [ ] `env.example` 文件只包含占位符值
- [ ] 团队成员了解如何安全配置环境变量
- [ ] 生产环境密钥已在托管平台配置
- [ ] 定期轮换敏感密钥

## 🆘 如果密钥已经泄露

1. **立即行动**：
   - 在 Supabase Dashboard 中重置所有密钥
   - 更新所有环境中的配置

2. **清理 Git 历史**（如果密钥被提交）：
   ```bash
   # 使用 git filter-branch 或 BFG Repo-Cleaner
   # 这会重写历史，需要谨慎操作
   ```

3. **通知团队**：
   - 告知所有成员更新本地配置
   - 确认生产环境已更新

## 📞 需要帮助？
- 查看 Supabase 官方文档
- 检查托管平台的环境变量配置指南
- 联系项目管理员获取密钥访问权限 