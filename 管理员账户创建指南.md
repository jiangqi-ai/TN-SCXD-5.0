# 管理员账户创建指南

## 🔐 管理员账户创建方案

为了解决"没有管理员账户无法配置数据库"的问题，我们提供了多种创建第一个管理员账户的方法：

## 方案一：系统初始化页面（推荐）

### 访问初始化页面
访问：`http://localhost:3001/init`

### 功能特点
- ✅ 自动检测系统状态
- ✅ 验证数据库连接
- ✅ 创建第一个管理员账户
- ✅ 初始化基本系统设置
- ✅ 防重复初始化

### 使用步骤
1. 确保 `.env.local` 配置正确
2. 启动开发服务器：`npm run dev`
3. 访问 http://localhost:3001/init
4. 填写管理员信息：
   - 管理员姓名
   - 邮箱地址
   - 密码（至少6位）
   - 确认密码
5. 点击"创建管理员账户"
6. 等待创建完成，自动跳转到登录页

## 方案二：第一个注册用户自动成为管理员

### 自动升级机制
如果系统检测到没有管理员账户，第一个通过正常注册流程注册的用户将自动获得管理员权限。

### 使用步骤
1. 访问注册页面：http://localhost:3001/auth/register
2. 填写注册信息
3. 系统会自动检测这是第一个用户
4. 自动分配管理员角色
5. 显示"恭喜！您已成为系统管理员"

## 方案三：直接数据库操作（高级用户）

### 使用 Supabase Dashboard
1. 登录 [Supabase Dashboard](https://supabase.com/dashboard)
2. 选择您的项目
3. 进入 SQL Editor
4. 执行以下 SQL 创建管理员：

```sql
-- 首先创建认证用户（通过 Supabase Auth）
-- 然后手动插入管理员档案
INSERT INTO profiles (id, email, full_name, role, created_at, updated_at)
VALUES (
  'user-uuid-from-auth',  -- 替换为实际的用户 UUID
  'admin@example.com',
  '系统管理员',
  'admin',
  NOW(),
  NOW()
);
```

## 系统初始化后的配置流程

### 1. 登录管理后台
- 使用创建的管理员账户登录
- 访问：http://localhost:3001/auth/login

### 2. 访问管理后台
- 登录后访问：http://localhost:3001/admin
- 或点击导航栏中的管理后台链接

### 3. 配置系统设置
- **数据库配置**：在 `/admin/database-config` 配置数据库参数
- **系统设置**：在 `/admin/settings` 配置网站基本信息
- **用户管理**：在 `/admin/users` 管理用户账户
- **产品管理**：在 `/admin/products` 管理商品

### 4. 数据库配置项目
在管理后台可以配置：
- Supabase URL 和密钥
- 连接池设置
- 超时配置
- 安全策略
- 备份策略

## 🚨 安全提醒

### 创建管理员时
- ✅ 使用强密码（至少8位，包含字母、数字、特殊字符）
- ✅ 使用安全的邮箱地址
- ✅ 妥善保管管理员凭据
- ❌ 不要在生产环境使用默认密码

### 系统配置后
- ✅ 立即修改默认设置
- ✅ 启用双因素认证（如果支持）
- ✅ 定期更换密码
- ✅ 监控管理员活动日志

## 🔧 故障排除

### 问题：初始化页面显示"数据库连接失败"
**解决方案：**
1. 检查 `.env.local` 文件配置
2. 验证 Supabase URL 和密钥
3. 确认 Supabase 项目状态
4. 检查网络连接

### 问题：管理员创建失败
**解决方案：**
1. 检查邮箱格式是否正确
2. 确认密码符合要求
3. 查看浏览器控制台错误信息
4. 检查数据库表结构

### 问题：创建后无法登录
**解决方案：**
1. 确认邮箱验证（如果启用）
2. 检查密码是否正确
3. 清除浏览器缓存
4. 查看数据库中的用户记录

## 📞 需要帮助？

如果遇到问题：
1. 查看 `/debug` 页面的系统诊断
2. 检查浏览器控制台错误
3. 查看服务器日志
4. 参考 [开发环境问题排查.md](./开发环境问题排查.md)

---

**重要提醒：** 管理员账户拥有系统最高权限，请务必妥善保管！ 