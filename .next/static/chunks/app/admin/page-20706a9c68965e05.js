(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{4689:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3071:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]])},7332:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},1298:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5119:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},8004:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},4322:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},9409:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9036:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},3505:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},5750:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2549:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4114:function(e,t,a){Promise.resolve().then(a.bind(a,5970))},5970:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),r=a(2265),l=a(2899),n=a(3504),i=a(5750),c=a(4322),d=a(3505),o=a(1298);function u(){let[e,t]=(0,r.useState)(null),[a,u]=(0,r.useState)(!0),m=(0,l.JU)();(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{let{count:e}=await m.from("profiles").select("*",{count:"exact",head:!0}),{count:a}=await m.from("products").select("*",{count:"exact",head:!0}).eq("is_active",!0),{count:s}=await m.from("orders").select("*",{count:"exact",head:!0}),{data:r}=await m.from("orders").select("total_amount").eq("status","delivered"),l=(null==r?void 0:r.reduce((e,t)=>e+t.total_amount,0))||0,{data:n}=await m.from("orders").select("\n          id,\n          total_amount,\n          status,\n          created_at,\n          user_id,\n          profiles!orders_user_id_fkey (\n            full_name,\n            email\n          )\n        ").order("created_at",{ascending:!1}).limit(5),{data:i}=await m.from("products").select("id, name, stock_quantity").eq("is_active",!0).lte("stock_quantity",10).order("stock_quantity",{ascending:!0}).limit(5);t({totalUsers:e||0,totalProducts:a||0,totalOrders:s||0,totalRevenue:l,recentOrders:(n||[]).map(e=>({...e,profiles:Array.isArray(e.profiles)?e.profiles[0]:e.profiles})),lowStockProducts:i||[]})}catch(e){console.error("Error fetching dashboard data:",e)}finally{u(!1)}},x=e=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(e),y=e=>new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),f=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},p=e=>{switch(e){case"pending":return"待处理";case"processing":return"处理中";case"shipped":return"已发货";case"delivered":return"已送达";case"cancelled":return"已取消";default:return e}};if(a)return(0,s.jsx)(n.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})})});let g=[{name:"总用户数",stat:(null==e?void 0:e.totalUsers)||0,icon:i.Z,color:"bg-blue-500"},{name:"总产品数",stat:(null==e?void 0:e.totalProducts)||0,icon:c.Z,color:"bg-green-500"},{name:"总订单数",stat:(null==e?void 0:e.totalOrders)||0,icon:d.Z,color:"bg-purple-500"},{name:"总收入",stat:x((null==e?void 0:e.totalRevenue)||0),icon:o.Z,color:"bg-yellow-500"}];return(0,s.jsx)(n.Z,{children:(0,s.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8",children:[(0,s.jsx)("div",{className:"sm:flex sm:items-center",children:(0,s.jsxs)("div",{className:"sm:flex-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"仪表板"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"系统概览和关键数据统计"})]})}),(0,s.jsx)("div",{className:"mt-8 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:g.map(e=>(0,s.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,s.jsx)("div",{className:"p-5",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-10 h-10 ".concat(e.color," rounded-md flex items-center justify-center"),children:(0,s.jsx)(e.icon,{className:"w-6 h-6 text-white"})})}),(0,s.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:e.name}),(0,s.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:e.stat})]})})]})})},e.name))}),(0,s.jsxs)("div",{className:"mt-8 grid grid-cols-1 gap-8 lg:grid-cols-2",children:[(0,s.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,s.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"最近订单"}),(0,s.jsx)("div",{className:"flow-root",children:(null==e?void 0:e.recentOrders.length)===0?(0,s.jsx)("p",{className:"text-gray-500 text-center py-4",children:"暂无订单"}):(0,s.jsx)("ul",{className:"-my-5 divide-y divide-gray-200",children:null==e?void 0:e.recentOrders.map(e=>{var t,a;return(0,s.jsx)("li",{className:"py-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:(null===(t=e.profiles)||void 0===t?void 0:t.full_name)||(null===(a=e.profiles)||void 0===a?void 0:a.email)||"未知用户"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:y(e.created_at)})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:x(e.total_amount)}),(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(f(e.status)),children:p(e.status)})]})]})},e.id)})})})]})}),(0,s.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,s.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"库存预警"}),(0,s.jsx)("div",{className:"flow-root",children:(null==e?void 0:e.lowStockProducts.length)===0?(0,s.jsx)("p",{className:"text-gray-500 text-center py-4",children:"库存充足"}):(0,s.jsx)("ul",{className:"-my-5 divide-y divide-gray-200",children:null==e?void 0:e.lowStockProducts.map(e=>(0,s.jsx)("li",{className:"py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name})}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(0===e.stock_quantity?"bg-red-100 text-red-800":e.stock_quantity<=5?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"),children:["库存: ",e.stock_quantity]})})]})},e.id))})})]})})]})]})})}},1396:function(e,t,a){e.exports=a(8326)},4033:function(e,t,a){e.exports=a(94)}},function(e){e.O(0,[199,326,504,971,472,744],function(){return e(e.s=4114)}),_N_E=e.O()}]);