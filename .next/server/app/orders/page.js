(()=>{var e={};e.id=569,e.ids=[569],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},6555:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>o,originalPathname:()=>m,pages:()=>x,routeModule:()=>u,tree:()=>d});var r=t(7096),a=t(6132),i=t(7284),l=t.n(i),n=t(2564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3692)),"E:\\starter-template\\TN-SCXD-5.0\\app\\orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,623)),"E:\\starter-template\\TN-SCXD-5.0\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],x=["E:\\starter-template\\TN-SCXD-5.0\\app\\orders\\page.tsx"],m="/orders/page",o={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/orders/page",pathname:"/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8269:(e,s,t)=>{Promise.resolve().then(t.bind(t,1316))},1316:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(3854),a=t(4218),i=t(3984),l=t(7896),n=t(1018),c=t(6934),d=t(2978),x=t(8954),m=t(6974),o=t(3518),u=t(4045);function p(){let[e,s]=(0,a.useState)([]),[t,p]=(0,a.useState)(!0),[h,g]=(0,a.useState)(null),[y,j]=(0,a.useState)(!1),{user:f}=(0,l.useAuth)(),N=(0,n.useRouter)(),b=(0,i.JU)();(0,a.useEffect)(()=>{if(!f){N.push("/auth/login");return}v()},[f]);let v=async()=>{if(!f)return;p(!0);let{data:e}=await b.from("orders").select(`
        *,
        order_items (
          id,
          quantity,
          price,
          products (
            name,
            image_url
          )
        )
      `).eq("user_id",f.id).order("created_at",{ascending:!1});e&&s(e),p(!1)},w=e=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(e),_=e=>(0,o.Z)(new Date(e),"yyyy年MM月dd日 HH:mm",{locale:u.Z}),q=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=e=>{switch(e){case"pending":return"待处理";case"processing":return"处理中";case"shipped":return"已发货";case"delivered":return"已送达";case"cancelled":return"已取消";default:return e}},k=e=>{g(e),j(!0)},C=()=>{j(!1),g(null)};return f?(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"我的订单"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"查看您的所有订单信息和状态"})]}),t?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(c.Z,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"暂无订单"}),r.jsx("p",{className:"text-gray-500 mb-8",children:"您还没有任何订单记录"}),r.jsx("button",{onClick:()=>N.push("/products"),className:"btn-primary",children:"开始购物"})]}):r.jsx("div",{className:"space-y-6",children:e.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsx("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["订单号: #",e.id.slice(0,8)]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["下单时间: ",_(e.created_at)]})]})}),(0,r.jsxs)("div",{className:"mt-4 sm:mt-0 flex items-center space-x-4",children:[r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q(e.status)}`,children:P(e.status)}),r.jsx("button",{onClick:()=>k(e),className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"查看详情"})]})]})}),r.jsx("div",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.order_items.slice(0,4).map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:e.products.image_url?r.jsx("img",{src:e.products.image_url,alt:e.products.name,className:"w-12 h-12 object-cover rounded-lg"}):r.jsx(d.Z,{className:"h-6 w-6 text-gray-400"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.products.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["数量: ",e.quantity]})]})]},e.id)),e.order_items.length>4&&(0,r.jsxs)("div",{className:"flex items-center justify-center text-sm text-gray-500",children:["还有 ",e.order_items.length-4," 件商品..."]})]})}),(0,r.jsxs)("div",{className:"ml-6 text-right",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"订单总额"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w(e.total_amount)})]})]})})]},e.id))}),y&&h&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:C}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[(0,r.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["订单详情 #",h.id.slice(0,8)]}),r.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-500",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"订单状态"}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q(h.status)}`,children:P(h.status)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"下单时间"}),r.jsx("span",{className:"text-sm text-gray-900",children:_(h.created_at)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"配送信息"]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg space-y-2",children:[r.jsx("p",{className:"text-sm text-gray-900",children:h.shipping_address}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(m.Z,{className:"h-4 w-4 mr-1"}),h.shipping_phone]}),h.notes&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"备注："}),h.notes]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[r.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"商品列表"]}),r.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:h.order_items.map(e=>(0,r.jsxs)("div",{className:"flex items-center p-3 border-b border-gray-200 last:border-b-0",children:[r.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:e.products.image_url?r.jsx("img",{src:e.products.image_url,alt:e.products.name,className:"w-12 h-12 object-cover rounded-lg"}):r.jsx(d.Z,{className:"h-6 w-6 text-gray-400"})}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.products.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["数量: ",e.quantity," \xd7 ",w(e.price)]})]}),r.jsx("div",{className:"text-sm font-medium text-gray-900",children:w(e.quantity*e.price)})]},e.id))})]}),r.jsx("div",{className:"border-t border-gray-200 pt-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-lg font-medium text-gray-900",children:"订单总计"}),r.jsx("span",{className:"text-xl font-bold text-primary-600",children:w(h.total_amount)})]})})]})]}),r.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:r.jsx("button",{onClick:C,className:"btn-secondary",children:"关闭"})})]})]})})]}):null}},8954:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},6974:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3692:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>c});var r=t(5153);let a=(0,r.createProxy)(String.raw`E:\starter-template\TN-SCXD-5.0\app\orders\page.tsx`),{__esModule:i,$$typeof:l}=a,n=a.default,c=n}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[271,502,641,692],()=>t(6555));module.exports=r})();