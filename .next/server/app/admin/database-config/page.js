(()=>{var e={};e.id=243,e.ids=[243],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},681:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=t(7096),a=t(6132),l=t(7284),i=t.n(l),n=t(2564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["admin",{children:["database-config",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,165)),"E:\\starter-template\\TN-SCXD-5.0\\app\\admin\\database-config\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,623)),"E:\\starter-template\\TN-SCXD-5.0\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["E:\\starter-template\\TN-SCXD-5.0\\app\\admin\\database-config\\page.tsx"],x="/admin/database-config/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/database-config/page",pathname:"/admin/database-config",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5789:(e,s,t)=>{Promise.resolve().then(t.bind(t,1493))},1493:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(3854),a=t(4218),l=t(1870),i=t(1170),n=t(518),d=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,d.Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);var o=t(3614),x=t(7546),m=t(7413),u=t(7716);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,d.Z)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);var y=t(3092),p=t(9170),b=t(5256);function g(){let[e,s]=(0,a.useState)({url:"",anonKey:"",serviceRoleKey:"",connectionPool:10,timeout:30}),[t,d]=(0,a.useState)(!1),[g,j]=(0,a.useState)(!1),[f,v]=(0,a.useState)(null),[N,w]=(0,a.useState)({anonKey:!1,serviceRoleKey:!1});(0,a.useEffect)(()=>{k(),Z()},[]);let k=()=>{let e=l.Z.getConfig();e&&s(e)},Z=async()=>{let e=await l.Z.checkConnection();v(e)},q=(e,t)=>{s(s=>({...s,[e]:t}))},C=async()=>{j(!0);try{let e=await l.Z.checkConnection();v(e),e.connected?b.default.success("数据库连接测试成功！"):b.default.error(`连接测试失败: ${e.error}`)}catch(e){b.default.error(`连接测试失败: ${e.message}`)}finally{j(!1)}},P=async()=>{d(!0);try{let s=await l.Z.updateConfig(e);s?(b.default.success("数据库配置已保存并生效！"),await Z()):b.default.error("保存配置失败")}catch(e){b.default.error(`保存配置失败: ${e.message}`)}finally{d(!1)}},K=async()=>{d(!0);try{await l.Z.reloadConfig(),k(),await Z(),b.default.success("配置已重新加载")}catch(e){b.default.error(`重新加载配置失败: ${e.message}`)}finally{d(!1)}};return(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"border-b border-gray-200 pb-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"数据库配置"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"管理 Supabase 数据库连接配置和参数"})]}),r.jsx("div",{className:"flex items-center space-x-3",children:f&&(0,r.jsxs)("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full text-sm ${f.connected?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${f.connected?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{children:f.connected?"已连接":"连接失败"})]})})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:r.jsx("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(i.Z,{className:"h-6 w-6 text-blue-400"})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"数据库状态"}),r.jsx("dd",{className:"text-lg font-medium text-gray-900",children:f?.connected?"正常":"异常"})]})})]})})}),r.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:r.jsx("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(n.Z,{className:"h-6 w-6 text-green-400"})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"连接池大小"}),r.jsx("dd",{className:"text-lg font-medium text-gray-900",children:e.connectionPool})]})})]})})}),r.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:r.jsx("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(c,{className:"h-6 w-6 text-purple-400"})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"超时时间"}),(0,r.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:[e.timeout,"s"]})]})})]})})})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"连接配置"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"修改数据库连接参数，保存后立即生效"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"项目 URL"}),r.jsx("input",{type:"url",value:e.url,onChange:e=>q("url",e.target.value),placeholder:"https://your-project-id.supabase.co",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Supabase 项目的完整 URL 地址"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"公开密钥 (anon key)"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[r.jsx("input",{value:e.anonKey,onChange:e=>q("anonKey",e.target.value),type:N.anonKey?"text":"password",placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 pr-10"}),r.jsx("button",{type:"button",onClick:()=>w(e=>({...e,anonKey:!e.anonKey})),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:N.anonKey?r.jsx(o.Z,{className:"h-4 w-4 text-gray-400"}):r.jsx(x.Z,{className:"h-4 w-4 text-gray-400"})})]}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"用于客户端认证的公开密钥"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"服务密钥 (service_role key)"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[r.jsx("input",{value:e.serviceRoleKey||"",onChange:e=>q("serviceRoleKey",e.target.value),type:N.serviceRoleKey?"text":"password",placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 pr-10"}),r.jsx("button",{type:"button",onClick:()=>w(e=>({...e,serviceRoleKey:!e.serviceRoleKey})),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:N.serviceRoleKey?r.jsx(o.Z,{className:"h-4 w-4 text-gray-400"}):r.jsx(x.Z,{className:"h-4 w-4 text-gray-400"})})]}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"用于服务端操作的特权密钥（可选）"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"连接池大小"}),r.jsx("input",{type:"number",value:e.connectionPool,onChange:e=>q("connectionPool",parseInt(e.target.value)),min:"1",max:"100",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"同时支持的最大连接数 (1-100)"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"超时时间（秒）"}),r.jsx("input",{type:"number",value:e.timeout,onChange:e=>q("timeout",parseInt(e.target.value)),min:"5",max:"300",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"数据库操作超时时间 (5-300秒)"})]})]})]}),(0,r.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between",children:[(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("button",{onClick:K,disabled:t,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:[t?r.jsx(m.Z,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"重新加载"]}),(0,r.jsxs)("button",{onClick:C,disabled:g||!e.url||!e.anonKey,className:"inline-flex items-center px-4 py-2 border border-blue-300 rounded-md shadow-sm text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 disabled:opacity-50",children:[g?r.jsx(m.Z,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx(h,{className:"h-4 w-4 mr-2"}),"测试连接"]})]}),(0,r.jsxs)("button",{onClick:P,disabled:t||!e.url||!e.anonKey,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:[t?r.jsx(m.Z,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"保存配置"]})]})]}),f&&!f.connected&&f.error&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx(p.Z,{className:"h-5 w-5 text-red-400 mr-3 mt-0.5"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"连接错误"}),r.jsx("div",{className:"mt-2 text-sm text-red-700",children:r.jsx("p",{children:f.error})})]})]})}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx(i.Z,{className:"h-5 w-5 text-blue-400 mr-3 mt-0.5"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"配置说明"}),r.jsx("div",{className:"mt-2 text-sm text-blue-700",children:(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[r.jsx("li",{children:"项目 URL 和公开密钥是必填项，可在 Supabase Dashboard 的 Settings → API 中找到"}),r.jsx("li",{children:"服务密钥用于后台管理操作，具有更高权限，请妥善保管"}),r.jsx("li",{children:"连接池大小影响并发性能，建议根据应用负载调整"}),r.jsx("li",{children:"配置修改后会立即生效，请谨慎操作"})]})})]})]})})]})}},9170:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1170:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},3614:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},7546:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7413:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},7716:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3092:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},165:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>d});var r=t(5153);let a=(0,r.createProxy)(String.raw`E:\starter-template\TN-SCXD-5.0\app\admin\database-config\page.tsx`),{__esModule:l,$$typeof:i}=a,n=a.default,d=n}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[271,502,692],()=>t(681));module.exports=r})();