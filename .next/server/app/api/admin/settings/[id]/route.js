(()=>{var e={};e.id=434,e.ids=[434],e.modules={2213:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=2213,e.exports=t},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},8142:(e,t,r)=>{"use strict";r.r(t),r.d(t,{headerHooks:()=>q,originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>x,staticGenerationBailout:()=>g});var s={};r.r(s),r.d(s,{DELETE:()=>p});var i=r(884),o=r(6132),n=r(1040),a=r(6813),u=r(4596),c=r(5798);async function p(e,{params:t}){try{let e=(0,a.createRouteHandlerClient)({cookies:u.cookies}),{data:{user:r},error:s}=await e.auth.getUser();if(s||!r)return c.Z.json({error:"未授权"},{status:401});let{data:i}=await e.from("profiles").select("role").eq("id",r.id).single();if(i?.role!=="admin")return c.Z.json({error:"权限不足"},{status:403});let{id:o}=t;if(!o)return c.Z.json({error:"缺少设置ID"},{status:400});let{error:n}=await e.from("settings").delete().eq("id",o);if(n)return console.error("删除设置失败:",n),c.Z.json({error:"删除设置失败"},{status:500});return c.Z.json({success:!0})}catch(e){return console.error("API错误:",e),c.Z.json({error:"服务器错误"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/settings/[id]/route",pathname:"/api/admin/settings/[id]",filename:"route",bundlePath:"app/api/admin/settings/[id]/route"},resolvedPagePath:"E:\\starter-template\\TN-SCXD-5.0\\app\\api\\admin\\settings\\[id]\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:x,serverHooks:m,headerHooks:q,staticGenerationBailout:g}=d,f="/api/admin/settings/[id]/route";function h(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:x})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[271,741,54],()=>r(8142));module.exports=s})();